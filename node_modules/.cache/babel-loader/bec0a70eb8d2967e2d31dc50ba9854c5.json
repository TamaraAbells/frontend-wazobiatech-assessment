{"ast":null,"code":"import axios from 'axios';\nimport * as TYPES from '../actions/types';\nconst getToken = localStorage.getItem('authToken') || '';\nconst initialState = {\n  counter: 0,\n  isOpen: false,\n  isShow: false,\n  isLoading: true,\n  isLoggedIn: false,\n  isVerifiedAt: '',\n  verifyToken: '',\n  currentUser: {},\n  authToken: getToken,\n  register: {\n    email: '',\n    password: '',\n    fname: '',\n    lname: ''\n  },\n  item: {\n    name: '',\n    description: ''\n  },\n  items: [{\n    id: 1,\n    name: 'Item 1',\n    description: 'Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet sint. Velit officia consequat duis enim velit mollit. Exercitation veniam consequat sunt nostrud amet.'\n  }, {\n    id: 2,\n    name: 'Item 2',\n    description: 'Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet sint. Velit officia consequat duis enim velit mollit. Exercitation veniam consequat sunt nostrud amet.'\n  }]\n};\nexport function reducer(state = initialState, action) {\n  switch (action.type) {\n    case TYPES.OPEN_MODAL:\n      return { ...state,\n        isOpen: true\n      };\n\n    case TYPES.CLOSE_MODAL:\n      return { ...state,\n        isOpen: false\n      };\n\n    case TYPES.SHOW_PASSWORD:\n      return { ...state,\n        isShow: !state.isShow\n      };\n\n    case TYPES.IS_LOADING:\n      return { ...state,\n        isLoading: true\n      };\n\n    case TYPES.IS_LOADED:\n      return { ...state,\n        isLoading: false\n      };\n\n    case TYPES.GET_ALL_ITEMS:\n      return state.items;\n\n    case TYPES.REMOVE_ITEM:\n      {\n        const filtered = state.items.filter(item => item.id !== action.payload);\n        return { ...state,\n          items: filtered\n        };\n      }\n\n    case TYPES.ADD_ITEM:\n      {\n        state.item = {};\n        return { ...state,\n          items: [...state.items, {\n            id: state.items.length + 1,\n            ...action.payload\n          }]\n        };\n      }\n\n    case TYPES.EDIT_ITEM:\n      {\n        return { ...state,\n          item: action.payload\n        };\n      }\n\n    case TYPES.UPDATE_ITEM:\n      {\n        state.item = {};\n        const index = state.items.findIndex(i => i.id === action.payload.id);\n        state.items[index] = action.payload;\n        return state;\n      }\n\n    case TYPES.REGISTER:\n      {\n        localStorage.setItem('authToken', authToken);\n        const {\n          authToken,\n          currentUser\n        } = action.payload;\n        return { ...state,\n          authToken,\n          currentUser\n        };\n      }\n\n    case TYPES.LOGIN:\n      {\n        const {\n          authToken,\n          currentUser\n        } = action.payload;\n        localStorage.setItem('authToken', authToken);\n        return { ...state,\n          authToken,\n          currentUser\n        };\n      }\n\n    case TYPES.CURRENT_USER:\n      {\n        const func = fetchCurrentUser(state.authToken);\n        console.log('FETCHCURRENT', func());\n        return { ...state,\n          currentUser: action.payload,\n          isVerifiedAt: action.payload.email_verified_at,\n          verifyToken: action.payload.email_verification_token\n        };\n      }\n\n    case TYPES.VERIFY_ACCOUNT:\n      {\n        return { ...state,\n          currentUser: action.payload,\n          isVerifiedAt: action.payload.email_verified_at\n        };\n      }\n\n    default:\n      return state;\n  }\n} // export const fetchCurrentUser = async(authToken) => {\n//   if(authToken){\n//     return await axios.get('/me', {\n//       headers: {Authorization: `Bearer ${authToken}`}\n//     })\n//   }\n// }\n\nexport function fetchCurrentUser(authToken) {\n  return function (dispatch) {\n    if (authToken) {\n      return axios.get('/me', {\n        headers: {\n          Authorization: `Bearer ${authToken}`\n        }\n      });\n    }\n  };\n}","map":{"version":3,"names":["axios","TYPES","getToken","localStorage","getItem","initialState","counter","isOpen","isShow","isLoading","isLoggedIn","isVerifiedAt","verifyToken","currentUser","authToken","register","email","password","fname","lname","item","name","description","items","id","reducer","state","action","type","OPEN_MODAL","CLOSE_MODAL","SHOW_PASSWORD","IS_LOADING","IS_LOADED","GET_ALL_ITEMS","REMOVE_ITEM","filtered","filter","payload","ADD_ITEM","length","EDIT_ITEM","UPDATE_ITEM","index","findIndex","i","REGISTER","setItem","LOGIN","CURRENT_USER","func","fetchCurrentUser","console","log","email_verified_at","email_verification_token","VERIFY_ACCOUNT","dispatch","get","headers","Authorization"],"sources":["/Users/user/Documents/GitHub/frontend-eng-assessment/src/redux/reducers/reducer.js"],"sourcesContent":["import axios from 'axios'\nimport * as TYPES from '../actions/types'\n\nconst getToken = localStorage.getItem('authToken') || ''\n\nconst initialState = {\n  counter: 0,\n  isOpen: false,\n  isShow: false,\n  isLoading: true,\n  isLoggedIn: false,\n  isVerifiedAt: '',\n  verifyToken: '',\n  currentUser: {},\n  authToken: getToken,\n  register: {\n    email: '',\n    password: '',\n    fname: '',\n    lname: '',\n  },\n  item: {\n    name: '',\n    description: '',\n  },\n  items: [\n    { id: 1, name: 'Item 1', description: 'Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet sint. Velit officia consequat duis enim velit mollit. Exercitation veniam consequat sunt nostrud amet.'},\n    { id: 2, name: 'Item 2', description: 'Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet sint. Velit officia consequat duis enim velit mollit. Exercitation veniam consequat sunt nostrud amet.'},\n  ]\n}\n\nexport function reducer(state = initialState, action) {\n  switch (action.type) {\n    case TYPES.OPEN_MODAL:\n      return {...state, isOpen: true}\n\n    case TYPES.CLOSE_MODAL:\n      return {...state, isOpen: false}\n\n    case TYPES.SHOW_PASSWORD:\n      return {...state, isShow: !state.isShow}\n\n    case TYPES.IS_LOADING:\n      return {...state, isLoading: true}\n\n    case TYPES.IS_LOADED:\n      return {...state, isLoading: false}\n\n    case TYPES.GET_ALL_ITEMS:\n      return state.items\n    \n    case TYPES.REMOVE_ITEM: {\n      const filtered = state.items.filter((item) => (\n        item.id !== action.payload\n      ))\n      return {...state, items: filtered}\n    }\n\n    case TYPES.ADD_ITEM: {\n      state.item = {}\n      return {...state, items: [\n        ...state.items, {\n          id: state.items.length + 1,\n          ...action.payload\n        }]\n      }\n    }\n\n    case TYPES.EDIT_ITEM: {\n      return {...state, item: action.payload}\n    }\n\n    case TYPES.UPDATE_ITEM: {\n      state.item = {}\n      const index = state.items.findIndex(i => i.id === action.payload.id)\n      state.items[index] = action.payload\n      return state\n    }\n\n    case TYPES.REGISTER: {\n      localStorage.setItem('authToken', authToken)\n      const {authToken, currentUser}  = action.payload\n      return {...state,  authToken, currentUser}\n    }\n\n    case TYPES.LOGIN: {\n      const {authToken, currentUser}  = action.payload\n      localStorage.setItem('authToken', authToken)\n      return {...state,  authToken, currentUser}\n    }\n\n    case TYPES.CURRENT_USER: {\n      const func  = fetchCurrentUser(state.authToken)\n      console.log('FETCHCURRENT', func())\n      return {\n        ...state,\n        currentUser: action.payload,\n        isVerifiedAt: action.payload.email_verified_at,\n        verifyToken: action.payload.email_verification_token\n      }\n    }\n\n    case TYPES.VERIFY_ACCOUNT: {\n      return {\n        ...state,\n        currentUser: action.payload,\n        isVerifiedAt: action.payload.email_verified_at\n      }\n    }\n\n    default:\n      return state\n  }\n}\n\n// export const fetchCurrentUser = async(authToken) => {\n//   if(authToken){\n//     return await axios.get('/me', {\n//       headers: {Authorization: `Bearer ${authToken}`}\n//     })\n//   }\n// }\n\nexport function fetchCurrentUser(authToken){\n  return function(dispatch){\n    if(authToken){\n      return axios.get('/me', {\n        headers: {Authorization: `Bearer ${authToken}`}\n      })\n    }\n  }\n}\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,KAAZ,MAAuB,kBAAvB;AAEA,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,KAAqC,EAAtD;AAEA,MAAMC,YAAY,GAAG;EACnBC,OAAO,EAAE,CADU;EAEnBC,MAAM,EAAE,KAFW;EAGnBC,MAAM,EAAE,KAHW;EAInBC,SAAS,EAAE,IAJQ;EAKnBC,UAAU,EAAE,KALO;EAMnBC,YAAY,EAAE,EANK;EAOnBC,WAAW,EAAE,EAPM;EAQnBC,WAAW,EAAE,EARM;EASnBC,SAAS,EAAEZ,QATQ;EAUnBa,QAAQ,EAAE;IACRC,KAAK,EAAE,EADC;IAERC,QAAQ,EAAE,EAFF;IAGRC,KAAK,EAAE,EAHC;IAIRC,KAAK,EAAE;EAJC,CAVS;EAgBnBC,IAAI,EAAE;IACJC,IAAI,EAAE,EADF;IAEJC,WAAW,EAAE;EAFT,CAhBa;EAoBnBC,KAAK,EAAE,CACL;IAAEC,EAAE,EAAE,CAAN;IAASH,IAAI,EAAE,QAAf;IAAyBC,WAAW,EAAE;EAAtC,CADK,EAEL;IAAEE,EAAE,EAAE,CAAN;IAASH,IAAI,EAAE,QAAf;IAAyBC,WAAW,EAAE;EAAtC,CAFK;AApBY,CAArB;AA0BA,OAAO,SAASG,OAAT,CAAiBC,KAAK,GAAGrB,YAAzB,EAAuCsB,MAAvC,EAA+C;EACpD,QAAQA,MAAM,CAACC,IAAf;IACE,KAAK3B,KAAK,CAAC4B,UAAX;MACE,OAAO,EAAC,GAAGH,KAAJ;QAAWnB,MAAM,EAAE;MAAnB,CAAP;;IAEF,KAAKN,KAAK,CAAC6B,WAAX;MACE,OAAO,EAAC,GAAGJ,KAAJ;QAAWnB,MAAM,EAAE;MAAnB,CAAP;;IAEF,KAAKN,KAAK,CAAC8B,aAAX;MACE,OAAO,EAAC,GAAGL,KAAJ;QAAWlB,MAAM,EAAE,CAACkB,KAAK,CAAClB;MAA1B,CAAP;;IAEF,KAAKP,KAAK,CAAC+B,UAAX;MACE,OAAO,EAAC,GAAGN,KAAJ;QAAWjB,SAAS,EAAE;MAAtB,CAAP;;IAEF,KAAKR,KAAK,CAACgC,SAAX;MACE,OAAO,EAAC,GAAGP,KAAJ;QAAWjB,SAAS,EAAE;MAAtB,CAAP;;IAEF,KAAKR,KAAK,CAACiC,aAAX;MACE,OAAOR,KAAK,CAACH,KAAb;;IAEF,KAAKtB,KAAK,CAACkC,WAAX;MAAwB;QACtB,MAAMC,QAAQ,GAAGV,KAAK,CAACH,KAAN,CAAYc,MAAZ,CAAoBjB,IAAD,IAClCA,IAAI,CAACI,EAAL,KAAYG,MAAM,CAACW,OADJ,CAAjB;QAGA,OAAO,EAAC,GAAGZ,KAAJ;UAAWH,KAAK,EAAEa;QAAlB,CAAP;MACD;;IAED,KAAKnC,KAAK,CAACsC,QAAX;MAAqB;QACnBb,KAAK,CAACN,IAAN,GAAa,EAAb;QACA,OAAO,EAAC,GAAGM,KAAJ;UAAWH,KAAK,EAAE,CACvB,GAAGG,KAAK,CAACH,KADc,EACP;YACdC,EAAE,EAAEE,KAAK,CAACH,KAAN,CAAYiB,MAAZ,GAAqB,CADX;YAEd,GAAGb,MAAM,CAACW;UAFI,CADO;QAAlB,CAAP;MAMD;;IAED,KAAKrC,KAAK,CAACwC,SAAX;MAAsB;QACpB,OAAO,EAAC,GAAGf,KAAJ;UAAWN,IAAI,EAAEO,MAAM,CAACW;QAAxB,CAAP;MACD;;IAED,KAAKrC,KAAK,CAACyC,WAAX;MAAwB;QACtBhB,KAAK,CAACN,IAAN,GAAa,EAAb;QACA,MAAMuB,KAAK,GAAGjB,KAAK,CAACH,KAAN,CAAYqB,SAAZ,CAAsBC,CAAC,IAAIA,CAAC,CAACrB,EAAF,KAASG,MAAM,CAACW,OAAP,CAAed,EAAnD,CAAd;QACAE,KAAK,CAACH,KAAN,CAAYoB,KAAZ,IAAqBhB,MAAM,CAACW,OAA5B;QACA,OAAOZ,KAAP;MACD;;IAED,KAAKzB,KAAK,CAAC6C,QAAX;MAAqB;QACnB3C,YAAY,CAAC4C,OAAb,CAAqB,WAArB,EAAkCjC,SAAlC;QACA,MAAM;UAACA,SAAD;UAAYD;QAAZ,IAA4Bc,MAAM,CAACW,OAAzC;QACA,OAAO,EAAC,GAAGZ,KAAJ;UAAYZ,SAAZ;UAAuBD;QAAvB,CAAP;MACD;;IAED,KAAKZ,KAAK,CAAC+C,KAAX;MAAkB;QAChB,MAAM;UAAClC,SAAD;UAAYD;QAAZ,IAA4Bc,MAAM,CAACW,OAAzC;QACAnC,YAAY,CAAC4C,OAAb,CAAqB,WAArB,EAAkCjC,SAAlC;QACA,OAAO,EAAC,GAAGY,KAAJ;UAAYZ,SAAZ;UAAuBD;QAAvB,CAAP;MACD;;IAED,KAAKZ,KAAK,CAACgD,YAAX;MAAyB;QACvB,MAAMC,IAAI,GAAIC,gBAAgB,CAACzB,KAAK,CAACZ,SAAP,CAA9B;QACAsC,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BH,IAAI,EAAhC;QACA,OAAO,EACL,GAAGxB,KADE;UAELb,WAAW,EAAEc,MAAM,CAACW,OAFf;UAGL3B,YAAY,EAAEgB,MAAM,CAACW,OAAP,CAAegB,iBAHxB;UAIL1C,WAAW,EAAEe,MAAM,CAACW,OAAP,CAAeiB;QAJvB,CAAP;MAMD;;IAED,KAAKtD,KAAK,CAACuD,cAAX;MAA2B;QACzB,OAAO,EACL,GAAG9B,KADE;UAELb,WAAW,EAAEc,MAAM,CAACW,OAFf;UAGL3B,YAAY,EAAEgB,MAAM,CAACW,OAAP,CAAegB;QAHxB,CAAP;MAKD;;IAED;MACE,OAAO5B,KAAP;EA/EJ;AAiFD,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,SAASyB,gBAAT,CAA0BrC,SAA1B,EAAoC;EACzC,OAAO,UAAS2C,QAAT,EAAkB;IACvB,IAAG3C,SAAH,EAAa;MACX,OAAOd,KAAK,CAAC0D,GAAN,CAAU,KAAV,EAAiB;QACtBC,OAAO,EAAE;UAACC,aAAa,EAAG,UAAS9C,SAAU;QAApC;MADa,CAAjB,CAAP;IAGD;EACF,CAND;AAOD"},"metadata":{},"sourceType":"module"}